<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

        <record id="view_fpoc_account_invoice_refund" model="ir.ui.view">
            <field name="name">fpoc.account.invoice.refund.form</field>
            <field name="model">account.invoice.refund</field>
            <field name="inherit_id" ref="account.view_account_invoice_refund"/>
            <field name="arch" type="xml">
                <button name="invoice_refund" position="after">
                    <field name="fiscal_status" invisible="1"/>
                    <span attrs="{'invisible': [('fiscal_status', 'in', (False,'','draft','refund'))]}">
                        <button string='Create Fiscal Refund' name="action_fiscal_refund" type="object" class="oe_highlight"/>
                        or
                    </span>
                </button>
            </field>
        </record>

        <record id="view_account_invoice_fop_form" model="ir.ui.view">
            <field name="model">account.invoice</field>
            <field name="name">account.invoice.fpoc.form</field>
            <field name="inherit_id" ref="account.invoice_form" />
            <field name="arch" type="xml">
                <button name="invoice_print" position="after">
                    <button name="action_fiscal_printer" string="Print Fiscal" type="object" context="{'fiscal': True}" attrs="{'invisible':['|',('use_fiscal_printer','=',False),'|',('state', '!=', 'paid'),('fiscal_status', 'in', ('print', 'refund'))]}" class="oe_highlight" groups="base.group_user"/>
                    <!--<button name="action_fiscal_printer" string="Print NonFiscal" type="object" context="{'non_fiscal': True}" attrs="{'invisible':[('state', '!=', 'paid'),('fiscal_status', 'in', ('draft','print'))]}" class="oe_highlight" groups="base.group_user"/>-->
                    <!--<button name="action_fiscal_printer" string="Print Fiscal Refund" type="object" context="{'fiscal_refund': True}" attrs="{'invisible':[('fiscal_status', '!=', 'print')]}" class="oe_highlight" groups="base.group_user"/>-->
                </button>
                <field name="sent" position="after">
                    <group>
                        <field name='use_fiscal_printer'/>
                        <!--<field name='internal_number' attrs="{'invisible': ['|',('use_fiscal_printer','=',False),('fiscal_status', '=', 'draft')]}" string="Fiscal Invoice Number"/>-->
                        <field name="fiscal_status" widget="statusbar" attrs="{'invisible': [('use_fiscal_printer','=',False)]}" options="{'clickable': True}"/>
                    </group>
                </field>
                <notebook position="inside">
                    <page string="Fiscal Printer" position="inside" attrs="{'invisible': [('use_fiscal_printer','=',False)]}">
                        <group colspan="2" col="2">
                            <field name='fiscal_printer_id' domain="[('printerStatus','=','active')]"/>
                            <field name='fiscal_printer_anon_partner_id'/>
                        </group>
                    </page>
                </notebook>
            </field>
        </record>
    
  </data>
</openerp>
<!-- vim:expandtab:smartindent:tabstop=4:softtabstop=4:shiftwidth=4
     -->
